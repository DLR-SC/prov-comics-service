const AGenerator = require('./ARaphaelGenerator');
const moment = require('moment');

class IntroGenerator extends AGenerator {
    constructor(activity) {
        super();
        this.activity = activity;
    }

    generate() {
        let dateTime = moment(this.activity.startTime);
        let date = dateTime.format('Do MMMM YYYY');
        let time = dateTime.format('H:mm');

        let paper = this.raphael(0, 0, 500, 500);

        //Header line
        paper.rect(0, 0, 500, 500).attr({ fill: 'none', stroke: '#000', 'stroke-width': 3 });
        paper.path('M0,40H500Z').attr({ fill: 'none', stroke: '#000', 'stroke-width': 2 });

        //Date and Name Texts
        paper.text(10, 13, 'On  ' + date + ' at ' + time).attr({ 'font-size': 12, 'text-anchor': 'start', 'font-weight': 'bold' });
        paper.text('50%', '95%', this.activity.owner.label).attr({ 'font-size': 13, 'font-weight': 'bold' });
        paper.text('97%', 13, this.activity.id.split(':')[1].toUpperCase()).attr({ 'font-size': 13, 'font-weight': 'bold', fill: '#f00', 'text-anchor': 'end' });

        //Person Graphic + Smartphone
        let person = paper.path('M 123.00,12.23 C 129.34,12.03 133.10,12.75 139.00,15.23 176.03,30.82 177.44,84.24 141.00,101.51 134.28,104.69 126.40,106.15 119.00,105.99 75.40,104.99 56.97,49.97 90.00,22.32 96.61,16.79 102.71,14.30 111.00,12.23 115.04,11.90 118.93,11.98 123.00,12.23 Z M 55.00,252.00 C 55.00,252.00 58.72,286.00 58.72,286.00 58.72,286.00 59.78,297.00 59.78,297.00 59.14,304.78 52.31,312.71 44.00,311.63 27.45,309.48 26.15,287.77 26.00,275.00 26.00,275.00 22.00,228.00 22.00,228.00 22.00,228.00 22.00,187.00 22.00,187.00 22.04,164.15 27.44,140.18 40.36,121.00 48.08,109.54 57.49,100.67 72.00,100.04 95.67,99.01 99.41,114.48 121.00,113.99 125.06,113.89 129.20,113.22 133.00,111.73 140.90,108.65 155.27,95.42 168.96,109.04 171.16,111.23 172.73,113.25 174.18,116.00 176.00,119.49 177.14,123.03 176.81,127.00 176.81,127.00 173.00,146.00 173.00,146.00 176.37,146.47 189.15,149.15 190.98,151.56 191.79,152.62 192.54,156.46 193.00,158.00 195.29,152.00 201.58,143.62 205.33,138.00 209.58,131.65 213.93,124.63 221.00,121.10 230.98,116.11 241.47,123.30 241.95,134.00 242.41,144.05 232.96,156.40 227.80,165.00 227.80,165.00 209.47,194.36 209.47,194.36 201.97,201.28 185.26,199.71 177.00,194.92 173.82,193.07 170.63,189.62 168.00,187.00 168.00,187.00 168.00,419.00 168.00,419.00 168.00,419.00 168.00,463.00 168.00,463.00 168.00,465.59 168.13,468.53 167.30,471.00 165.08,477.66 156.84,486.39 150.00,488.36 147.36,489.13 143.78,489.03 141.00,489.00 130.12,488.87 119.11,482.99 115.80,472.00 114.90,469.02 115.00,466.08 115.00,463.00 115.00,463.00 115.00,279.00 115.00,279.00 115.00,279.00 107.00,279.00 107.00,279.00 107.00,279.00 107.00,463.00 107.00,463.00 107.00,465.56 107.11,468.55 106.35,471.00 105.48,473.82 103.39,476.73 101.53,479.00 98.63,482.56 95.27,485.79 91.00,487.64 87.33,489.22 83.90,489.04 80.00,489.00 70.82,488.89 63.06,485.79 57.65,478.00 54.18,473.01 54.01,467.81 54.00,462.00 54.00,462.00 54.00,320.00 54.00,320.00 54.00,318.00 53.88,314.91 54.60,313.09 55.70,310.30 58.39,308.72 60.35,305.96 62.90,302.39 64.13,296.35 63.82,292.00 63.82,292.00 59.00,243.00 59.00,243.00 59.00,243.00 59.00,209.00 59.00,209.00 59.01,200.94 60.58,192.96 61.73,185.00 61.73,185.00 64.00,171.00 64.00,171.00 64.00,171.00 55.00,171.00 55.00,171.00 55.00,171.00 55.00,252.00 55.00,252.00 Z');
        let smartphone = paper.path('M 238.00,91.00 C 238.00,91.00 234.80,107.00 234.80,107.00 234.39,109.05 233.95,112.64 232.27,114.01 231.01,115.03 226.81,115.45 225.00,115.90 220.34,117.05 216.63,118.75 213.18,122.18 209.93,125.42 203.96,135.52 201.00,140.00 199.57,142.18 197.33,146.45 194.79,147.23 192.11,148.05 179.11,144.14 176.00,143.00 176.00,143.00 190.00,77.00 190.00,77.00 190.00,77.00 238.00,91.00 238.00,91.00 Z');
        person.transform('s0.8,0.8t100,0');
        smartphone.transform('s0.8,0.8t79,34');
        person.attr({ fill: '#ffef87' });
        smartphone.attr({ fill: '#ADD8E6' });

        paper.text('40%', '40%', this.activity.owner.label[0]).attr({ 'font-size': 40, 'font-weight': 'bold' });

    }

}

module.exports = IntroGenerator;