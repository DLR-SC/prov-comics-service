service: comic

provider:
  name: aws
  runtime: nodejs8.10
  stage: dev
  region: eu-central-1
  timeout: 20
  iamRoleStatements:
    - Effect: "Allow"
      Action: 
        - "s3:GetObject"
        - "s3:ListBuckets"
        - "s3:ListObjects"
        - "s3:DeleteObjects"
        - "s3:CreateBucket"
        - "s3:PutBucketWebsite"
        - "s3:PutBucketTagging"
        - "s3:PutBucketPolicy"
        - "s3:PutObject"
      Resource: "arn:aws:s3:::*"
    - Effect: Allow
      Action:
        - lambda:InvokeFunction
        - lambda:InvokeAsync
      Resource: "*"  

# you can add packaging information here
#package:
#  include:
#    - include-me.js
#    - include-me-dir/**
#  exclude:
#    - node_modules/**
#    - exclude-me-dir/**

functions:
  app:
    handler: index.handler
    description: Index file for the comic REST API
    events:
      - http: ANY /
      - http: 'ANY {proxy+}'

plugins:
  - serverless-offline

resources:
  Resources:
    S3BucketComicStorage:
      Type: AWS::S3::Bucket
      Properties:
        BucketName: prov-comic-storage
